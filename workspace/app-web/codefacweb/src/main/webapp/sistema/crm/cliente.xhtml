<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://xmlns.jcp.org/jsf/composite/componentes">

    <ui:composition  template="/template/codefac_template.xhtml">

        <ui:define name="opciones" >
            <p:menuitem oncomplete="PF('btnCargarProforma').jq.click();" value="Cargar desde la proforma"  icon="pi pi-clone"  />
        </ui:define>

        <ui:define name="contenido" >

            <f:event listener="#{controllerCodefacMb.agregarVista(clienteMb)}" type="preRenderComponent" /> 
            <!--<p:remoteCommand process="@this" name="panelDatos" update="@form"/>-->
            <p:tabView>
                <p:tab title="Datos Principales">
                    
                    <!--<p:graphicImage  library="img" name="sinImagen.jpg" width="150px" /> 
                    <p:graphicImage  value="${clienteMb.imagenStream}" /> -->
                    
                    <div class="p-grid" style="text-align: left" >
                        <div class="p-col-12 p-md-6 p-lg-3" >
                            <h:outputLabel id="txtIdentificacion"  value="Identificación:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">                            
                            <h:inputText required="false" value="#{clienteMb.cliente.identificacion}" />
                        </div> 

                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel value="Pasaporte:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">                            
                            <p:selectBooleanCheckbox value="#{clienteMb.identificacionPasaporte}" />
                        </div>



                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Nombres:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">                            
                            <p:inputText required="false" value="#{clienteMb.cliente.nombres}" style="width: 90%" >
                                <p:ajax update="txtRazonSocial" event="keyup"  listener="#{clienteMb.eventoNombreKeyUp()}" />
                            </p:inputText>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Nacionalidad:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <p:selectOneMenu id="console1" value="#{clienteMb.nacionalidadSeleccionada}"  style="width:125px" converter="nacionalidadConverter">
                                <f:selectItems var="nacionalidad" value="#{clienteMb.nacionalidadesList}" itemValue="#{nacionalidad.idNacionalidad.toString()}"    />
                            </p:selectOneMenu>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Apellidos:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <p:inputText required="false" value="#{clienteMb.cliente.apellidos}" style="width: 90%"  >
                                <p:ajax update="txtRazonSocial"  event="keyup"  listener="#{clienteMb.eventoNombreKeyUp()}" />
                            </p:inputText>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Estado:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <p:selectOneMenu id="console2" value="#{clienteMb.estadoSeleccionada}"  style="width:125px" converter="estadoEnumConverter">
                                <f:selectItems var="estado" value="#{clienteMb.estadosEnumList}" itemValue="#{estado.estado}"    />
                            </p:selectOneMenu>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Razón Social:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <p:inputText id="txtRazonSocial" required="false" value="#{clienteMb.cliente.razonSocial}" style="width: 90%" />
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Nombre Legal:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:inputText required="false" value="#{clienteMb.establecimientoDefecto.nombreComercial}" style="width: 90%" />
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Nombre Contacto:"/>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:inputText  required="false" value="#{clienteMb.cliente.contactoClienteNombre}" style="width: 90%" />
                        </div>

                        <div class="p-col-12 p-md-12 p-lg-6">
                            <!--<h:outputLabel  value="Nombre Contacto:"/>-->
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Dirección:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:inputText required="false" value="#{clienteMb.establecimientoDefecto.direccion}"  style="width: 90%"/> 
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Referencia Dirección:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:inputText required="false" value="#{clienteMb.establecimientoDefecto.referenciaDireccion}"  style="width: 90%"/> 
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Teléfono Convencional:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:inputText required="false" value="#{clienteMb.establecimientoDefecto.telefonoConvencional}" />

                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Extensión:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:inputText required="false" value="#{clienteMb.establecimientoDefecto.extensionTelefono}" style="width: 50%" />
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Teléfono Celular:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:inputText required="false" value="#{clienteMb.establecimientoDefecto.telefonoCelular}" />
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:outputLabel  value="Correo Electrónico:"/>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <h:inputText  required="false" value="#{clienteMb.establecimientoDefecto.correoElectronico}" style="width: 80%" />
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-3">
                            <p:remoteCommand name="passToJSFMB"
                                             action="#{clienteMb.remoteAction()}"
                                             id="remote_action" 
                                             process="@this"
                                             update=""
                                             />

                            <script>
                                function getLocation()
                                {
                                    //alert('ejecutando');
                                    if (navigator.geolocation) {
                                        navigator.geolocation.getCurrentPosition(showPosition,
                                            function(error){
                                                alert(error.message);
                                            }, {
                                                enableHighAccuracy: true
                                                     ,timeout : 5000
                                            });
                                            
                                    } else {
                                        alert('Geolocation no soportada');
                                        x.innerHTML = "Geolocation is not supported by this browser.";
                                    }
                                }

                                function showPosition(position) {
                                    //alert('x=' + position.coords.latitude + ',y=' + position.coords.longitude);

                                    parametros = [
                                        {
                                            name: 'longitud',
                                            value: position.coords.longitude
                                        },
                                        {
                                            name: 'latitud',
                                            value: position.coords.latitude
                                        }
                                    ];

                                    passToJSFMB(parametros);

                                    /*passToJSFMB([ {
                                     name : 'longitud',
                                     value : position.coords.latitude
                                     } ]);
                                     
                                     passToJSFMB([ {
                                     name : 'latitud',
                                     value : position.coords.longitude
                                     } ]);*/
                                }
                            </script>
                        </div>
                    </div>

                    <p:accordionPanel id="ubicacionPanel">
                        <p:tab title="Ubicación">
                            <div class="p-grid" style="text-align: left" >
                                <div class="p-col-12 p-md-6 p-lg-4">
                                    Latitud:
                                    <h:inputText id="latitudId" value="#{clienteMb.establecimientoDefecto.latitud}" required="false" />
                                </div>
                                <div class="p-col-12 p-md-6 p-lg-4">
                                    Longitud:
                                    <h:inputText id="longitudId" value="#{clienteMb.establecimientoDefecto.longitud}" required="false"  />
                                </div>
                                <div class="p-col-12 p-md-6 p-lg-4">
                                    <p:commandButton value="Actualizar" onclick="getLocation();" />
                                    <p:commandButton value="Ver" action="#{clienteMb.abrirGoogleMapsUbicacion()}" style="margin-right:20px;"/>
                                </div>
                            </div>


                        </p:tab>
                    </p:accordionPanel>



                </p:tab>
                <p:tab title="Datos Adicionales">

                    <div class="p-grid" style="text-align: left" >
                        
                        <div class="p-col-12 p-md-12 p-lg-12" >
                            <div><h:outputLabel   value="Código Personalizado:"/></div>
                            <h:inputText id="codigoPersonalizadoId" value="#{clienteMb.establecimientoDefecto.codigoPersonalizado}" required="false"  />
                        </div>
                        
                        <div class="p-col-12 p-md-6 p-lg-6" >
                            <div><h:outputLabel   value="Tipo Cliente:"/></div>
                            <p:selectOneMenu  value="#{clienteMb.cliente.tipCliente}"  style="width:125px" converter="stringConverter" >
                                <f:selectItems var="tipo" value="#{clienteMb.tiposClientes}" itemValue="#{tipo}"    />
                            </p:selectOneMenu>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-6" >
                            <div><h:outputLabel   value="Tipo :"/></div>
                            <p:selectOneMenu  value="#{clienteMb.operadorNegocioSeleccionado}"  style="width:125px" converter="operadorNegocioConverter">
                                <f:selectItems var="operador" value="#{clienteMb.operadoresNegocio}" itemValue="#{operador.letra}"    />
                            </p:selectOneMenu>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-6" >
                            <div><h:outputLabel   value="Forma pago por defecto :"/></div>
                            <p:selectOneMenu id="cmbFormaPago"   style="width:125px" value="#{clienteMb.sriFormaPagoSeleccionada}" converter="formaPagoConverter">
                                <f:selectItems var="formaPago" value="#{clienteMb.sriFormaPagoList}" itemValue="#{formaPago.id.toString()}"    />
                            </p:selectOneMenu>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-6" >
                            <div><h:outputLabel   value="Dias crédito cobro :"/></div>
                            <h:inputText required="false" value="#{clienteMb.cliente.diasCreditoCliente}"  style="width: 20%"/> 
                        </div>
                    </div>


                </p:tab>
                <p:tab title="Referencias">

                </p:tab>
                <p:tab title="Establecimientos">

                </p:tab>
            </p:tabView>




        </ui:define>
    </ui:composition>


</html>

