<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://xmlns.jcp.org/jsf/composite/componentes">

    <ui:composition  template="/template/codefac_template.xhtml">
        
        <ui:define name="contenido" >            
            <f:event listener="#{controllerCodefacMb.agregarVista(monitorComandaMb)}" type="preRenderComponent" />                 
            <p:poll interval="5" listener="#{monitorComandaMb.consultarComandasPendientes()}" update="panelDatos"/>
            
            <p:dataScroller id="panelDatos" value="#{monitorComandaMb.comandaList}" var="comanda" chunkSize="10" mode="inline"
                            >
                <f:facet name="header">
                   Listado de los comandas pendientes
                </f:facet>
                
                <div class="product" style="margin-bottom: 25px;">
                    <div class="product-list-item p-4">                        
                        <p:graphicImage name="img/comida.png" height="50px" />
                        <div class="product-list-detail">
                            <h1>#{comanda.mesa.nombre}</h1>
                            <h2>
                                <p:outputLabel value="#{comanda.fechaEmision}">
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
                                </p:outputLabel>
                            </h2>
                            
                            <div class="product-description">#{comanda.usuario.nick}</div>
                            <p:rating readonly="true" value="#{comanda.secuencial}"/>
                            <i class="pi pi-tag product-category-icon"/><span
                                class="product-category">#{comanda.secuencial}</span>
                        </div>
                        <div class="product-list-action">
                            <h:outputText value="#{comanda.total}" styleClass="product-price">
                                <f:convertNumber currencySymbol="$" type="currency"/>
                            </h:outputText>                           
                        </div>
                    </div>
                </div>
                <p:separator/>
            </p:dataScroller>
        </ui:define>
    </ui:composition>

</html>

