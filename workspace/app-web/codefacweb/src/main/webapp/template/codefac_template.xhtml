<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta http-equiv="X-UA-Compatible" content="IE=edge" />
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
                <meta name="apple-mobile-web-app-capable" content="yes" />
                <h:outputStylesheet library="css" name="estilo.css" />
                <title>Codefac</title>
            </f:facet>

            <!--<f:metadata>
                <f:viewAction action="#{applicationCodefacMb.controladorConexionServidor()}" />
            </f:metadata>-->
        </h:head>

        <h:body style="font-size: 11px">

            <h:form id="formulario" target="_blank" onkeypress="if (event.keyCode == 13) {
                        return false;
                    }">
                <!--- ============= PANELES AUXILIARES DERECHA, ABAJO ============= -->
                <p:sidebar widgetVar="sidebar1" baseZIndex="10000" class="leftCol">
                    <h1 style="font-weight:normal">Menu Principal</h1>
                    <p:commandButton value="Salir" style="width: 100%" oncomplete="PF('sidebar1').hide()"/>


                    <p:separator/>

                    <p:accordionPanel value="#{sessionMb.menuCodefacRespuesta.modulosDisponibles}" var="modulo" >

                        <p:tab title="#{modulo.nombre}">
                            <p:menu model="#{sessionMb.menuModelMap.get(modulo)}" toggleable="true" />
                        </p:tab>

                    </p:accordionPanel>

                </p:sidebar>

                <p:sidebar id="panelSecundario" widgetVar="sidebar4" position="bottom" baseZIndex="10000">
                    <h1 style="font-weight:normal">Comprobantes Procesados</h1>

                    <p:repeat id="barMonitor" value="#{sessionMb.barraProgresoList}" var="barra">
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-noborder" columnClasses="ui-grid-col-9, ui-grid-col-1,ui-grid-col-1, ui-grid-col-1">
                            <p:progressBar   widgetVar="pbAjax" ajax="true" value="#{barra.porcentaje}"  labelTemplate="#{barra.titulo()}" styleClass="animated " style="border: 2px;border-style: inset;background-color:  darkcyan;font-size: 12px;font-weight: normal;font-family: monospace" global="false">
                                <p:ajax event="complete"   oncomplete="PF('startButton2').enable()"/>
                            </p:progressBar>
                            <p:commandButton id="btnMonitorAlerta" process="@this"  icon="fa fa-bell-o" actionListener="#{barra.alerta()}"  />
                            <p:commandButton id="btnMonitorBuscar" process="@this" ajax="false" actionListener="#{barra.imprimir()}"  icon="fa fa-search"  />
                            <p:commandButton id="btnMonitorImprimir" process="@this" icon="fa fa-close"  />
                        </p:panelGrid>
                    </p:repeat>

                    <p:commandButton value="Cancel" oncomplete="PF('sidebar4').hide()"/>
                </p:sidebar>

                <!-- ============== MENU SUPERIOR DE LAS OPCIONES PRINCIPALES ====== -->            
                <p:toolbar id="tb" style="cabecera">
                    <f:facet name="left">
                        <p:commandButton icon="home-icon" process="@this" class="button-menu" title="Home" action="indexCodefac" />

                        <p:commandButton icon="new-icon" class="button-menu" title="Nuevo" process="@this" actionListener="#{controllerCodefacMb.nuevo()}" update="panelContenido">
                        </p:commandButton>

                        <!-- BOTON GRABAR -->
                        <p:commandButton icon="save-icon"  class="button-menu" type="button" onclick="PF('dialogConfirmarGrabar').show()" title="Grabar" disabled="false" >                                
                        </p:commandButton>

                        <!-- BOTON IMPRIMIR -->
                        <p:commandButton icon="print-icon" class="button-menu" title="Imprimir" ajax="false" actionListener="#{controllerCodefacMb.imprimir()}" update="messages" />

                        <!-- BOTON BUSCAR-->
                        <p:commandButton icon="find-icon" class="button-menu" process="@this" title="Buscar" actionListener="#{controllerCodefacMb.abrirDialogoBusqueda}" >
                            <p:ajax event="dialogReturn" listener="#{controllerCodefacMb.onObjectChosen}" update="panelContenido" />
                        </p:commandButton>

                        <!-- ELIMINAR BOTON -->
                        <p:commandButton icon="delete-icon" class="button-menu" type="button" onclick="PF('dialogConfirmarEliminar').show()" title="Eliminar" disabled="false" />


                        <!--<p:commandButton icon="refresh-icon" class="button-menu" title="Refrescar" disabled="true" />-->
                        <ui:insert name="btnAyuda">
                            <p:commandButton icon="help-icon" class="button-menu" title="Ayuda" actionListener="#{controllerCodefacMb.mostrarAyuda()}" update="panelSecundario" process="@this" disabled="false" />
                        </ui:insert>

                    </f:facet>   
                    <f:facet name="right">


                        <p:commandButton value="Menu" icon="fa fa-fw fa-bars" oncomplete="PF('sidebar1').show()" />
                        <p:commandButton value="%" icon="fa fa-fw fa-download" oncomplete="PF('sidebar4').show()" />
                        <p:menuButton value="MÃ¡s">
                            <p:menuitem value="Save" action="#{toolbarView.save}"  icon="pi pi-save" />
                            <p:menuitem value="Update" action="#{toolbarView.update}"  icon="pi pi-refresh" />
                            <p:menuitem value="Delete" action="#{toolbarView.delete}" ajax="false" icon="pi pi-times" />
                            <p:menuitem value="Homepage" url="http://www.primefaces.org" icon="pi pi-home" />
                        </p:menuButton>
                    </f:facet>
                </p:toolbar>
                <p:sticky target="tb" />


                <p:panel id="panelContenido" style="text-align: center">
                    <!-- =================== TITULO DE LA PAGINA ========================= -->
                    <div class="titulo_contenido" >
                        <p:outputLabel style="font-size: 17px" id="txtTituloPagina" value="#{controllerCodefacMb.getTituloPagina()}" />
                    </div>
                    <p:separator />

                    <!-- =================== CONTENIDO DONDE VAN A ESTAR LOS DATOS ========================= -->
                    <div  style="padding: 10px">
                        <ui:insert name="contenido">
                            Contenido por defecto de la plantilla  
                        </ui:insert>
                    </div>

                    <!-- ========================= PIE DE LA PAGINA ====================== -->
                    <div class="pie-pagina" >
                        Todos los derechos reservador Codefac 2018
                    </div> 
                </p:panel>

                <h:outputStylesheet name="primeflex/primeflex.css" library="css" />
                <h:outputStylesheet library="css" name="estilo.css" />
            </h:form>

        </h:body>

    </f:view>
</html>

